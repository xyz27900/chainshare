var o0=Object.defineProperty,a0=Object.defineProperties;var s0=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var O=(f,t,o)=>t in f?o0(f,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[t]=o,A=(f,t)=>{for(var o in t||(t={}))W.call(t,o)&&O(f,o,t[o]);if(z)for(var o of z(t))U.call(t,o)&&O(f,o,t[o]);return f},j=(f,t)=>a0(f,s0(t));var D=(f,t)=>{var o={};for(var n in f)W.call(f,n)&&t.indexOf(n)<0&&(o[n]=f[n]);if(f!=null&&z)for(var n of z(f))t.indexOf(n)<0&&U.call(f,n)&&(o[n]=f[n]);return o};import{r,j as e,a as d,c as i0,R as I,u as $,b as y,d as l0,W as Y,C as _,J as c0,v as G,L as d0,e as b0,f as u0,g as m0,h as p0,i as K,k as h0,l as g0,P as x0,H as w0}from"./vendor.917b3d4d.js";const y0=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=o(a);fetch(a.href,i)}};y0();function k0(){return r.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.exports.createElement("path",{d:"M85.57 446.25h340.86a32 32 0 0 0 28.17-47.17L284.18 82.58c-12.09-22.44-44.27-22.44-56.36 0L57.4 399.08a32 32 0 0 0 28.17 47.17z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}),r.exports.createElement("path",{d:"M250.26 195.39l5.74 122l5.73-121.95a5.74 5.74 0 0 0-5.79-6h0a5.74 5.74 0 0 0-5.68 5.95z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}),r.exports.createElement("path",{d:"M256 397.25a20 20 0 1 1 20-20a20 20 0 0 1-20 20z",fill:"currentColor"}))}const v0=f=>f.replace(f[0],f[0].toUpperCase()),J=f=>f.slice(0,5)+"..."+f.slice(-4),h=(...f)=>f.filter(t=>!!t).join(" "),g=({type:f="body",color:t="label-primary",align:o="left",normal:n=!1,strong:a=!1,truncate:i=!0,children:l})=>{const s=()=>a?"medium":n?"normal":"light";return e("span",{className:h("block",`font-${f}`,`font-${s()}`,`text-${o}`,`text-${t}`,i&&"truncate whitespace-nowrap"),children:l})},E=l=>{var s=l,{icon:f,size:t="lg",block:o=!1,className:n,children:a}=s,i=D(s,["icon","size","block","className","children"]);return e("button",j(A({className:h("border","border-solid","border-blue","bg-blue","select-none",o&&"block w-full",t==="sm"?"rounded-md":"rounded-lg",n)},i),{children:d("div",{className:h("flex","items-center","justify-center","px-4",t==="sm"?"h-7":"h-11"),children:[f&&e("div",{className:h(t==="sm"?"w-4":"w-6",t==="sm"?"h-4":"h-6",t==="sm"?"mr-1":"mr-2"),children:f}),e(g,{type:t==="sm"?"subhead":"headline",color:"white",align:"center",strong:!0,children:a})]})}))},N=({header:f,label:t,title:o,description:n,align:a="left",size:i="lg",truncate:l=!1,compact:s=!1,children:u})=>{const c=t&&t.length>0,p=o&&o.length>0,v=n&&(typeof n=="string"?n.length>0:!0);return d("div",{className:s?"":i==="lg"?"w-96":"w-72",children:[c&&e("div",{className:"mb-1 px-4 select-none",children:e(g,{type:"footnote",color:"label-secondary",children:t.toUpperCase()})}),d("div",{className:h("flex","flex-col","max-w-full","border","border-solid","border-separator","rounded-lg","bg-white","overflow-hidden",!s&&"p-8"),children:[f&&e("div",{className:"flex flex-col items-center mb-3",children:f}),(p||v)&&d("div",{className:h(!!u&&"mb-3"),children:[p&&e("div",{children:e(g,{type:"headline",align:a,strong:!0,truncate:!1,children:o})}),v&&e("div",{className:"mt-1",children:e(g,{type:"footnote",color:"label-secondary",align:a,truncate:l,children:n})})]}),u]})]})},x=a=>{var i=a,{color:f,className:t,children:o}=i,n=D(i,["color","className","children"]);return e("div",j(A({className:h("flex","items-stretch","justify-center",t,f&&`text-${f}`)},n),{children:o}))},L0=()=>e("div",{className:"h-full flex flex-col justify-center items-center",children:e("div",{className:"flex flex-col items-center",children:e(N,{header:e(x,{color:"red",className:"w-16 h-16",children:e(k0,{})}),title:"An error occurred with MetaMask",description:"Reload the page and try again",align:"center",children:e(E,{onClick:()=>{window.location.reload()},children:"Reload"})})})});function C(){return r.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.exports.createElement("g",{fill:"none"},r.exports.createElement("path",{d:"M10 3.5A6.5 6.5 0 0 0 3.5 10A.75.75 0 0 1 2 10a8 8 0 1 1 8 8a.75.75 0 0 1 0-1.5a6.5 6.5 0 1 0 0-13z",fill:"currentColor"})))}const E0=()=>e("div",{className:"h-full flex flex-col justify-center items-center",children:e(x,{color:"blue",className:"w-16 h-16 animate-spin",children:e(C,{})})}),N0={pending:!1,error:!1,account:null,network:null},V=i0({name:"app",initialState:N0,reducers:{setPending:(f,t)=>{f.pending=t.payload},setError:(f,t)=>{f.error=t.payload},setAccount:(f,t)=>{f.account=t.payload},setChain:(f,t)=>{f.network=t.payload},logout:f=>{f.account=null,f.network=null}}}),q=f=>f.app.pending,C0=f=>f.app.error,T=f=>f.app.account,S0=f=>f.app.network,R=f=>!!f.app.account&&!!f.app.network,{setPending:Z,setError:M0,setAccount:z0,setChain:A0,logout:j0}=V.actions,I0=V.reducer,F0="hh-sol-artifact-1",D0="Storage",T0="contracts/Storage.sol",R0=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"string",name:"ipfsHash",type:"string"},{indexed:!1,internalType:"string",name:"mime",type:"string"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"uint256",name:"uploadedAt",type:"uint256"}],name:"FileUploaded",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"string",name:"uuid",type:"string"}],name:"getFile",outputs:[{internalType:"string",name:"ipfsHash",type:"string"},{internalType:"string",name:"mime",type:"string"},{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"uploadedAt",type:"uint256"},{internalType:"uint32",name:"likes",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"string",name:"uuid",type:"string"}],name:"like",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"uuid",type:"string"},{internalType:"string",name:"ipfsHash",type:"string"},{internalType:"string",name:"mime",type:"string"},{internalType:"string",name:"name",type:"string"}],name:"uploadFile",outputs:[],stateMutability:"nonpayable",type:"function"}],B0="0x608060405234801561001057600080fd5b50610b74806100206000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c80630125133b14610046578063566c281f14610062578063f0286d4614610096575b600080fd5b610060600480360381019061005b9190610676565b6100b2565b005b61007c60048036038101906100779190610676565b610152565b60405161008d959493929190610886565b60405180910390f35b6100b060048036038101906100ab91906106ca565b610397565b005b6000808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020816040516100fe9190610815565b9081526020016040518091039020600401600081819054906101000a900463ffffffff168092919061012f90610a5c565b91906101000a81548163ffffffff021916908363ffffffff160217905550505050565b606080606060008060008060008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020876040516101a89190610815565b9081526020016040518091039020905080600001816001018260020183600301548460040160009054906101000a900463ffffffff168480546101ea906109f9565b80601f0160208091040260200160405190810160405280929190818152602001828054610216906109f9565b80156102635780601f1061023857610100808354040283529160200191610263565b820191906000526020600020905b81548152906001019060200180831161024657829003601f168201915b50505050509450838054610276906109f9565b80601f01602080910402602001604051908101604052809291908181526020018280546102a2906109f9565b80156102ef5780601f106102c4576101008083540402835291602001916102ef565b820191906000526020600020905b8154815290600101906020018083116102d257829003601f168201915b50505050509350828054610302906109f9565b80601f016020809104026020016040519081016040528092919081815260200182805461032e906109f9565b801561037b5780601f106103505761010080835404028352916020019161037b565b820191906000526020600020905b81548152906001019060200180831161035e57829003601f168201915b5050505050925095509550955095509550509295509295909350565b602e8351146103a557600080fd5b600082511180156103b857506101008251105b6103c157600080fd5b600081511180156103d457506101008151105b6103dd57600080fd5b600042905060006040518060a00160405280868152602001858152602001848152602001838152602001600063ffffffff168152509050806000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020876040516104619190610815565b9081526020016040518091039020600082015181600001908051906020019061048b929190610556565b5060208201518160010190805190602001906104a8929190610556565b5060408201518160020190805190602001906104c5929190610556565b506060820151816003015560808201518160040160006101000a81548163ffffffff021916908363ffffffff1602179055509050503373ffffffffffffffffffffffffffffffffffffffff167fa243d39caa4c5fa0efb41b7e3d59dcd1a7f72d5a6bc6c34a9bc20fcae079ead486868686604051610546949392919061082c565b60405180910390a2505050505050565b828054610562906109f9565b90600052602060002090601f01602090048101928261058457600085556105cb565b82601f1061059d57805160ff19168380011785556105cb565b828001600101855582156105cb579182015b828111156105ca5782518255916020019190600101906105af565b5b5090506105d891906105dc565b5090565b5b808211156105f55760008160009055506001016105dd565b5090565b600061060c61060784610913565b6108ee565b90508281526020810184848401111561062457600080fd5b61062f8482856109b7565b509392505050565b60008135905061064681610b27565b92915050565b600082601f83011261065d57600080fd5b813561066d8482602086016105f9565b91505092915050565b6000806040838503121561068957600080fd5b600061069785828601610637565b925050602083013567ffffffffffffffff8111156106b457600080fd5b6106c08582860161064c565b9150509250929050565b600080600080608085870312156106e057600080fd5b600085013567ffffffffffffffff8111156106fa57600080fd5b6107068782880161064c565b945050602085013567ffffffffffffffff81111561072357600080fd5b61072f8782880161064c565b935050604085013567ffffffffffffffff81111561074c57600080fd5b6107588782880161064c565b925050606085013567ffffffffffffffff81111561077557600080fd5b6107818782880161064c565b91505092959194509250565b600061079882610944565b6107a2818561094f565b93506107b28185602086016109c6565b6107bb81610b16565b840191505092915050565b60006107d182610944565b6107db8185610960565b93506107eb8185602086016109c6565b80840191505092915050565b6108008161099d565b82525050565b61080f816109a7565b82525050565b600061082182846107c6565b915081905092915050565b60006080820190508181036000830152610846818761078d565b9050818103602083015261085a818661078d565b9050818103604083015261086e818561078d565b905061087d60608301846107f7565b95945050505050565b600060a08201905081810360008301526108a0818861078d565b905081810360208301526108b4818761078d565b905081810360408301526108c8818661078d565b90506108d760608301856107f7565b6108e46080830184610806565b9695505050505050565b60006108f8610909565b90506109048282610a2b565b919050565b6000604051905090565b600067ffffffffffffffff82111561092e5761092d610ae7565b5b61093782610b16565b9050602081019050919050565b600081519050919050565b600082825260208201905092915050565b600081905092915050565b60006109768261097d565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b600063ffffffff82169050919050565b82818337600083830152505050565b60005b838110156109e45780820151818401526020810190506109c9565b838111156109f3576000848401525b50505050565b60006002820490506001821680610a1157607f821691505b60208210811415610a2557610a24610ab8565b5b50919050565b610a3482610b16565b810181811067ffffffffffffffff82111715610a5357610a52610ae7565b5b80604052505050565b6000610a67826109a7565b915063ffffffff821415610a7e57610a7d610a89565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b610b308161096b565b8114610b3b57600080fd5b5056fea264697066735822122093c647efe3c91dcffb4fcf4bc9ff556c6a40098a09630f45f478187727faf0d164736f6c63430008040033",P0="0x608060405234801561001057600080fd5b50600436106100415760003560e01c80630125133b14610046578063566c281f14610062578063f0286d4614610096575b600080fd5b610060600480360381019061005b9190610676565b6100b2565b005b61007c60048036038101906100779190610676565b610152565b60405161008d959493929190610886565b60405180910390f35b6100b060048036038101906100ab91906106ca565b610397565b005b6000808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020816040516100fe9190610815565b9081526020016040518091039020600401600081819054906101000a900463ffffffff168092919061012f90610a5c565b91906101000a81548163ffffffff021916908363ffffffff160217905550505050565b606080606060008060008060008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020876040516101a89190610815565b9081526020016040518091039020905080600001816001018260020183600301548460040160009054906101000a900463ffffffff168480546101ea906109f9565b80601f0160208091040260200160405190810160405280929190818152602001828054610216906109f9565b80156102635780601f1061023857610100808354040283529160200191610263565b820191906000526020600020905b81548152906001019060200180831161024657829003601f168201915b50505050509450838054610276906109f9565b80601f01602080910402602001604051908101604052809291908181526020018280546102a2906109f9565b80156102ef5780601f106102c4576101008083540402835291602001916102ef565b820191906000526020600020905b8154815290600101906020018083116102d257829003601f168201915b50505050509350828054610302906109f9565b80601f016020809104026020016040519081016040528092919081815260200182805461032e906109f9565b801561037b5780601f106103505761010080835404028352916020019161037b565b820191906000526020600020905b81548152906001019060200180831161035e57829003601f168201915b5050505050925095509550955095509550509295509295909350565b602e8351146103a557600080fd5b600082511180156103b857506101008251105b6103c157600080fd5b600081511180156103d457506101008151105b6103dd57600080fd5b600042905060006040518060a00160405280868152602001858152602001848152602001838152602001600063ffffffff168152509050806000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020876040516104619190610815565b9081526020016040518091039020600082015181600001908051906020019061048b929190610556565b5060208201518160010190805190602001906104a8929190610556565b5060408201518160020190805190602001906104c5929190610556565b506060820151816003015560808201518160040160006101000a81548163ffffffff021916908363ffffffff1602179055509050503373ffffffffffffffffffffffffffffffffffffffff167fa243d39caa4c5fa0efb41b7e3d59dcd1a7f72d5a6bc6c34a9bc20fcae079ead486868686604051610546949392919061082c565b60405180910390a2505050505050565b828054610562906109f9565b90600052602060002090601f01602090048101928261058457600085556105cb565b82601f1061059d57805160ff19168380011785556105cb565b828001600101855582156105cb579182015b828111156105ca5782518255916020019190600101906105af565b5b5090506105d891906105dc565b5090565b5b808211156105f55760008160009055506001016105dd565b5090565b600061060c61060784610913565b6108ee565b90508281526020810184848401111561062457600080fd5b61062f8482856109b7565b509392505050565b60008135905061064681610b27565b92915050565b600082601f83011261065d57600080fd5b813561066d8482602086016105f9565b91505092915050565b6000806040838503121561068957600080fd5b600061069785828601610637565b925050602083013567ffffffffffffffff8111156106b457600080fd5b6106c08582860161064c565b9150509250929050565b600080600080608085870312156106e057600080fd5b600085013567ffffffffffffffff8111156106fa57600080fd5b6107068782880161064c565b945050602085013567ffffffffffffffff81111561072357600080fd5b61072f8782880161064c565b935050604085013567ffffffffffffffff81111561074c57600080fd5b6107588782880161064c565b925050606085013567ffffffffffffffff81111561077557600080fd5b6107818782880161064c565b91505092959194509250565b600061079882610944565b6107a2818561094f565b93506107b28185602086016109c6565b6107bb81610b16565b840191505092915050565b60006107d182610944565b6107db8185610960565b93506107eb8185602086016109c6565b80840191505092915050565b6108008161099d565b82525050565b61080f816109a7565b82525050565b600061082182846107c6565b915081905092915050565b60006080820190508181036000830152610846818761078d565b9050818103602083015261085a818661078d565b9050818103604083015261086e818561078d565b905061087d60608301846107f7565b95945050505050565b600060a08201905081810360008301526108a0818861078d565b905081810360208301526108b4818761078d565b905081810360408301526108c8818661078d565b90506108d760608301856107f7565b6108e46080830184610806565b9695505050505050565b60006108f8610909565b90506109048282610a2b565b919050565b6000604051905090565b600067ffffffffffffffff82111561092e5761092d610ae7565b5b61093782610b16565b9050602081019050919050565b600081519050919050565b600082825260208201905092915050565b600081905092915050565b60006109768261097d565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b600063ffffffff82169050919050565b82818337600083830152505050565b60005b838110156109e45780820151818401526020810190506109c9565b838111156109f3576000848401525b50505050565b60006002820490506001821680610a1157607f821691505b60208210811415610a2557610a24610ab8565b5b50919050565b610a3482610b16565b810181811067ffffffffffffffff82111715610a5357610a52610ae7565b5b80604052505050565b6000610a67826109a7565b915063ffffffff821415610a7e57610a7d610a89565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b610b308161096b565b8114610b3b57600080fd5b5056fea264697066735822122093c647efe3c91dcffb4fcf4bc9ff556c6a40098a09630f45f478187727faf0d164736f6c63430008040033",H0={},W0={};var Q={_format:F0,contractName:D0,sourceName:T0,abi:R0,bytecode:B0,deployedBytecode:P0,linkReferences:H0,deployedLinkReferences:W0};const U0={contract:{full:null,readonly:null},ipfs:null,available:!1,login:async()=>console.warn("Login function is empty")},X=I.createContext(U0),O0=({children:f})=>{const t=$.useMetamask(),o=y(T),n=l0(),[a,i]=r.exports.useState(null),[l,s]=r.exports.useState(null),u=r.exports.useCallback(async()=>{n(Z(!0));try{await t.connect(Y),window.localStorage.setItem("CHAINSHARE","true")}catch{n(M0(!0))}finally{n(Z(!1))}},[]);return r.exports.useEffect(()=>{t.metaState.isConnected||n(j0())},[t.metaState.isConnected]),r.exports.useEffect(()=>{const{account:c}=t.metaState;c.length>0&&n(z0(c[0]))},[t.metaState.account]),r.exports.useEffect(()=>{const{chain:c}=t.metaState;c.id&&c.name.length>0&&n(A0({id:c.id,name:c.name}))},[t.metaState.chain]),r.exports.useEffect(()=>{if(!o){i(null);return}const c=new Y(window.ethereum).getSigner(),p=new _("0x3016151da610035acd690D28F53fda06E14a1381",Q.abi,c);i(p)},[o]),r.exports.useEffect(()=>{const c=new c0("https://ropsten.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161"),p=new _("0x3016151da610035acd690D28F53fda06E14a1381",Q.abi,c);s(p)},[]),e(X.Provider,{value:{contract:{full:a,readonly:l},ipfs:window.IpfsHttpClient.create({url:"https://ipfs.infura.io:5001"}),available:window.localStorage.getItem("CHAINSHARE")==="true",login:u},children:f})},S=()=>r.exports.useContext(X);function e0(){return r.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.exports.createElement("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor",strokeMiterlimit:10,strokeWidth:32}),r.exports.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,d:"M320 320L192 192"}),r.exports.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,d:"M192 320l128-128"}))}function $0(){return r.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.exports.createElement("path",{d:"M376 160H272v153.37l52.69-52.68a16 16 0 0 1 22.62 22.62l-80 80a16 16 0 0 1-22.62 0l-80-80a16 16 0 0 1 22.62-22.62L240 313.37V160H136a56.06 56.06 0 0 0-56 56v208a56.06 56.06 0 0 0 56 56h240a56.06 56.06 0 0 0 56-56V216a56.06 56.06 0 0 0-56-56z",fill:"currentColor"}),r.exports.createElement("path",{d:"M272 48a16 16 0 0 0-32 0v112h32z",fill:"currentColor"}))}function Y0(){return r.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.exports.createElement("path",{d:"M256 448a32 32 0 0 1-18-5.57c-78.59-53.35-112.62-89.93-131.39-112.8c-40-48.75-59.15-98.8-58.61-153C48.63 114.52 98.46 64 159.08 64c44.08 0 74.61 24.83 92.39 45.51a6 6 0 0 0 9.06 0C278.31 88.81 308.84 64 352.92 64c60.62 0 110.45 50.52 111.08 112.64c.54 54.21-18.63 104.26-58.61 153c-18.77 22.87-52.8 59.45-131.39 112.8a32 32 0 0 1-18 5.56z",fill:"currentColor"}))}function _0(){return r.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.exports.createElement("rect",{x:48,y:80,width:416,height:352,rx:48,ry:48,fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:32}),r.exports.createElement("circle",{cx:336,cy:176,r:32,fill:"none",stroke:"currentColor",strokeMiterlimit:10,strokeWidth:32}),r.exports.createElement("path",{d:"M304 335.79l-90.66-90.49a32 32 0 0 0-43.87-1.3L48 352",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}),r.exports.createElement("path",{d:"M224 432l123.34-123.34a32 32 0 0 1 43.11-2L464 368",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}))}const f0=({children:f})=>e("div",{className:"max-w-screen-md w-full flex-grow px-4 md:mx-auto",children:f}),B=({header:f=null,children:t})=>d("div",{className:"h-full flex flex-col",children:[f,e(f0,{children:e("div",{className:"flex flex-col h-full py-4",children:t})})]});function G0(){return r.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.exports.createElement("rect",{x:128,y:128,width:336,height:336,rx:57,ry:57,fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:32}),r.exports.createElement("path",{d:"M383.5 128l.5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}))}function K0(){return r.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.exports.createElement("path",{d:"M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208s208-93.13 208-208S370.87 48 256 48z",fill:"none",stroke:"currentColor",strokeMiterlimit:10,strokeWidth:32}),r.exports.createElement("path",{d:"M256 48c-58.07 0-112.67 93.13-112.67 208S197.93 464 256 464s112.67-93.13 112.67-208S314.07 48 256 48z",fill:"none",stroke:"currentColor",strokeMiterlimit:10,strokeWidth:32}),r.exports.createElement("path",{d:"M117.33 117.33c38.24 27.15 86.38 43.34 138.67 43.34s100.43-16.19 138.67-43.34",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}),r.exports.createElement("path",{d:"M394.67 394.67c-38.24-27.15-86.38-43.34-138.67-43.34s-100.43 16.19-138.67 43.34",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}),r.exports.createElement("path",{fill:"none",stroke:"currentColor",strokeMiterlimit:10,strokeWidth:32,d:"M256 48v416"}),r.exports.createElement("path",{fill:"none",stroke:"currentColor",strokeMiterlimit:10,strokeWidth:32,d:"M464 256H48"}))}function J0(){return r.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},r.exports.createElement("path",{d:"M311.9 260.8L160 353.6L8 260.8L160 0l151.9 260.8zM160 383.4L8 290.6L160 512l152-221.4l-152 92.8z",fill:"currentColor"}))}const V0=()=>d("div",{className:"flex items-center select-none",children:[e(x,{color:"blue",className:"w-4 h-4 mr-1",children:e(J0,{})}),e(g,{type:"headline",color:"blue",normal:!0,children:"ChainShare"})]}),q0={messages:[],notify:()=>console.warn("Notify function is empty")},t0=I.createContext(q0),Z0=({limit:f=3,timeout:t=2e3,children:o})=>{const[n,a]=r.exports.useState([]),i=r.exports.useRef(n),l=(s,u="success")=>{const c={id:G(),body:s,type:u};window.setTimeout(()=>{a(i.current.filter(p=>p.id!==c.id))},t),a([...n.slice(0,f-1),c])};return r.exports.useEffect(()=>{i.current=n},[n]),d(t0.Provider,{value:{messages:n,notify:l},children:[e("div",{className:"fixed bottom-0 flex flex-col flex-col-reverse p-2 left-1/2 -translate-x-1/2",children:n.map(s=>e("div",{className:h("px-4","py-2","rounded-lg","mb-2","first:mb-0",s.type==="error"?"bg-red":"bg-green"),children:e(g,{color:"white",children:s.body})},`message-${s.id}`))}),o]})},P=()=>r.exports.useContext(t0),r0=()=>{const{notify:f}=P(),{login:t}=S(),o=y(q),n=y(T),a=y(S0),i=y(R),l=n?J(n):"",s=(a==null?void 0:a.id)==="3",u=async()=>{if(!!n)try{await window.navigator.clipboard.writeText(n),f("Address copied","success")}catch{f("Can not copy address","error")}};return e("div",{className:"flex items-center bg-white border-0 border-b border-solid border-separator h-14",children:e(f0,{children:d("div",{className:"flex items-center justify-between",children:[d("div",{className:"flex items-center",children:[e(d0,{to:"/",children:e(V0,{})}),i&&a&&d("div",{className:h("flex","items-center","ml-4","py-1","px-2","rounded","select-none",s?"bg-gray-6":"bg-red"),title:s?"":"Incompatible network",children:[e(x,{color:s?"label-primary":"white",className:"h-4 w-4 mr-1.5",children:s?e(K0,{}):e(e0,{})}),d(g,{color:s?"label-primary":"white",type:"footnote",normal:!0,children:[v0(a.name)," (",a.id,")"]})]})]}),i&&n?e("div",{className:"flex items-center",children:d("div",{className:"flex items-center select-none",children:[e(g,{normal:!0,children:l}),e(x,{className:"w-4 h-4 ml-2 cursor-pointer text-label-secondary hover:text-label-primary",onClick:u,children:e(G0,{})})]})}):e(E,{className:"w-20 px-0",disabled:o,size:"sm",onClick:t,children:o?e(x,{color:"white",className:"w-4 h-4 animate-spin",children:e(C,{})}):"Login"})]})})})},Q0=(f,t)=>{const o="YYYY:MM:DD:HH:mm:ss".split(":");return t=new Date(t||Date.now()-new Date().getTimezoneOffset()*6e4),t.toISOString().split(/[-:.TZ]/).reduce((n,a,i)=>n.split(o[i]).join(a),f)},X0=f=>new Promise(t=>{const o=new FileReader;o.readAsArrayBuffer(f),o.onloadend=()=>{t(o.result)}}),ee=async f=>{let t=Uint8Array.from([]);for await(const n of f)t=Uint8Array.from([...t,...n]);const o=[...t].map(n=>String.fromCharCode(n)).join("");return btoa(o)},F=({property:f,value:t,border:o=!0})=>e("div",{className:h("px-4","border-0","border-solid","border-separator",o&&"border-b"),children:d("div",{className:"flex justify-between py-2 overflow-hidden",children:[e("div",{className:"mr-2",children:e(g,{normal:!0,children:f})}),e("div",{className:"ml-2",children:e(g,{color:"label-secondary",children:t})})]})}),fe=()=>{const{owner:f,uuid:t}=b0(),{notify:o}=P(),n=S(),a=y(R),[i,l]=r.exports.useState("LOADING"),[s,u]=r.exports.useState(null),[c,p]=r.exports.useState(!1),v=()=>typeof f!="string"?(o("Invalid owner address","error"),null):typeof t!="string"?(o("Invalid file identifier","error"),null):{owner:f,uuid:t},M=async()=>{if(!n.contract.readonly)return o("Unable to connect to contract","error"),null;const b=v();if(!b)return null;try{const m=await n.contract.readonly.getFile(b.owner,b.uuid);return{ipfsHash:m.ipfsHash,mime:m.mime,name:m.name,uploadedAt:m.uploadedAt,likes:m.likes}}catch{return o("Transaction error","error"),null}},k=async b=>{if(!n.ipfs)return o("Unable to connect to IPFS","error"),null;try{const m=n.ipfs.cat(b);return await ee(m)}catch{return o("IPFS error","error"),null}},w=async()=>{const b=await M();if(!b)return;if(b.ipfsHash.length===0){l("ERROR");return}const m=await k(b.ipfsHash);if(!m){l("ERROR");return}u({base64:`data:${b.mime};base64,${m}`,name:b.name,uploadedAt:Q0("YYYY-MM-DD HH:mm:ss",new Date(b.uploadedAt.toNumber()*1e3)),likes:b.likes}),l("OK")},L=async()=>{if(!a||!s)return;if(!n.contract.full){o("Unable to connect to contract","error");return}const b=v();if(!!b){p(!0);try{await(await n.contract.full.like(b.owner,b.uuid)).wait(),u(j(A({},s),{likes:s.likes+1}))}catch{o("Transaction error","error")}finally{p(!1)}}},H=()=>{if(!s)return;const b=document.createElement("a");b.setAttribute("href",s.base64),b.setAttribute("download",s.name),b.click()};return r.exports.useEffect(()=>{(async()=>await w())()},[n.contract.readonly,t,f]),d(B,{header:e(r0,{}),children:[i==="OK"&&s&&d("div",{className:"md:flex",children:[e("div",{className:"mr-0 mb-4 md:mb-0 md:mr-2 basis-1/2",children:e(N,{label:"Image",compact:!0,children:e("img",{src:s.base64,alt:""})})}),d("div",{className:"ml-0 md:ml-2 basis-1/2",children:[d(N,{label:"Information",compact:!0,children:[f&&e(F,{property:"Owner",value:J(f)}),e(F,{property:"Name",value:s.name}),e(F,{property:"Uploaded at",value:s.uploadedAt}),e(F,{property:"Likes",value:s.likes,border:!1})]}),d("div",{className:"mt-2 flex items-center",children:[a&&e("div",{className:"mr-1 flex-grow basis-1/2",children:e(E,{icon:e(x,{color:"white",className:h(c&&"animate-spin"),children:c?e(C,{}):e(Y0,{})}),disabled:c,size:"sm",block:!0,onClick:L,children:"Like"})}),e("div",{className:h(!a&&"flex-grow",a&&"ml-1",a&&"basis-1/2"),children:e(E,{icon:e(x,{color:"white",children:e($0,{})}),size:"sm",block:!0,onClick:H,children:"Download"})})]})]})]}),i==="LOADING"&&e("div",{className:"flex items-center justify-center flex-grow",children:d("div",{className:"flex flex-col items-center animate-pulse",children:[e(x,{color:"gray-2",className:"h-16 w-16 mb-3",children:e(_0,{})}),e(g,{type:"headline",color:"gray-2",normal:!0,children:"Loading image data"})]})}),i==="ERROR"&&e("div",{className:"flex items-center justify-center flex-grow",children:e(N,{header:e(x,{color:"orange",className:"w-16 h-16",children:e(e0,{})}),title:"Image not found",description:"Make sure you have provided right owner address and file id",align:"center",size:"md"})})]})};function te(){return r.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 318.6 318.6"},r.exports.createElement("path",{fill:"#E2761B",stroke:"#E2761B",strokeLinecap:"round",strokeLinejoin:"round",d:"m274.1 35.5-99.5 73.9L193 65.8z"}),r.exports.createElement("path",{fill:"#E4761B",stroke:"#E4761B",strokeLinecap:"round",strokeLinejoin:"round",d:"m44.4 35.5 98.7 74.6-17.5-44.3zm193.9 171.3-26.5 40.6 56.7 15.6 16.3-55.3zm-204.4.9L50.1 263l56.7-15.6-26.5-40.6z"}),r.exports.createElement("path",{fill:"#E4761B",stroke:"#E4761B",strokeLinecap:"round",strokeLinejoin:"round",d:"m103.6 138.2-15.8 23.9 56.3 2.5-2-60.5zm111.3 0-39-34.8-1.3 61.2 56.2-2.5zM106.8 247.4l33.8-16.5-29.2-22.8zm71.1-16.5 33.9 16.5-4.7-39.3z"}),r.exports.createElement("path",{fill:"#D7C1B3",stroke:"#D7C1B3",strokeLinecap:"round",strokeLinejoin:"round",d:"m211.8 247.4-33.9-16.5 2.7 22.1-.3 9.3zm-105 0 31.5 14.9-.2-9.3 2.5-22.1z"}),r.exports.createElement("path",{fill:"#233447",stroke:"#233447",strokeLinecap:"round",strokeLinejoin:"round",d:"m138.8 193.5-28.2-8.3 19.9-9.1zm40.9 0 8.3-17.4 20 9.1z"}),r.exports.createElement("path",{fill:"#CD6116",stroke:"#CD6116",strokeLinecap:"round",strokeLinejoin:"round",d:"m106.8 247.4 4.8-40.6-31.3.9zM207 206.8l4.8 40.6 26.5-39.7zm23.8-44.7-56.2 2.5 5.2 28.9 8.3-17.4 20 9.1zm-120.2 23.1 20-9.1 8.2 17.4 5.3-28.9-56.3-2.5z"}),r.exports.createElement("path",{fill:"#E4751F",stroke:"#E4751F",strokeLinecap:"round",strokeLinejoin:"round",d:"m87.8 162.1 23.6 46-.8-22.9zm120.3 23.1-1 22.9 23.7-46zm-64-20.6-5.3 28.9 6.6 34.1 1.5-44.9zm30.5 0-2.7 18 1.2 45 6.7-34.1z"}),r.exports.createElement("path",{fill:"#F6851B",stroke:"#F6851B",strokeLinecap:"round",strokeLinejoin:"round",d:"m179.8 193.5-6.7 34.1 4.8 3.3 29.2-22.8 1-22.9zm-69.2-8.3.8 22.9 29.2 22.8 4.8-3.3-6.6-34.1z"}),r.exports.createElement("path",{fill:"#C0AD9E",stroke:"#C0AD9E",strokeLinecap:"round",strokeLinejoin:"round",d:"m180.3 262.3.3-9.3-2.5-2.2h-37.7l-2.3 2.2.2 9.3-31.5-14.9 11 9 22.3 15.5h38.3l22.4-15.5 11-9z"}),r.exports.createElement("path",{fill:"#161616",stroke:"#161616",strokeLinecap:"round",strokeLinejoin:"round",d:"m177.9 230.9-4.8-3.3h-27.7l-4.8 3.3-2.5 22.1 2.3-2.2h37.7l2.5 2.2z"}),r.exports.createElement("path",{fill:"#763D16",stroke:"#763D16",strokeLinecap:"round",strokeLinejoin:"round",d:"m278.3 114.2 8.5-40.8-12.7-37.9-96.2 71.4 37 31.3 52.3 15.3 11.6-13.5-5-3.6 8-7.3-6.2-4.8 8-6.1zM31.8 73.4l8.5 40.8-5.4 4 8 6.1-6.1 4.8 8 7.3-5 3.6 11.5 13.5 52.3-15.3 37-31.3-96.2-71.4z"}),r.exports.createElement("path",{fill:"#F6851B",stroke:"#F6851B",strokeLinecap:"round",strokeLinejoin:"round",d:"m267.2 153.5-52.3-15.3 15.9 23.9-23.7 46 31.2-.4h46.5zm-163.6-15.3-52.3 15.3-17.4 54.2h46.4l31.1.4-23.6-46zm71 26.4 3.3-57.7 15.2-41.1h-67.5l15 41.1 3.5 57.7 1.2 18.2.1 44.8h27.7l.2-44.8z"}))}const re=()=>{const f=y(q),t=S(),o=async()=>{try{await t.login()}finally{}};return e(B,{children:e("div",{className:"flex flex-col flex-grow justify-center items-center",children:e(N,{header:e("div",{className:"w-48 h-48",children:e(te,{})}),title:"Login to ChainShare using MetaMask",description:d(I.Fragment,{children:["If you don't know what is MetaMask and how to use it,\xA0",e("a",{className:"text-blue hover:underline",href:"https://metamask.io/",target:"_blank",children:"visit website"})]}),children:e(E,{disabled:f,block:!0,onClick:o,children:f?e(x,{color:"white",className:"w-6 h-6 animate-spin",children:e(C,{})}):"Login"})})})})},ne=({file:f,accept:t,disabled:o=!1,onChange:n})=>{const a=i=>{const l=i.target.files;if(!l)return;const s=l.item(0);!s||n&&n(s)};return d("label",{className:h("block","w-full","rounded-lg","cursor-pointer","select-none",f?"bg-gray-6":"bg-blue",o&&"pointer-events-none"),children:[e("div",{className:"py-3",children:e(g,{type:"headline",color:f?"blue":"white",align:"center",strong:!0,children:f?"Change":"Add file"})}),e("input",{type:"file",accept:t==null?void 0:t.join(","),className:"hidden",onChange:a})]})},n0=["image/jpeg","image/png","image/svg+xml","image/gif"],oe=()=>{var M;const{notify:f}=P(),t=S(),o=y(T),n=u0(),[a,i]=r.exports.useState(null),[l,s]=r.exports.useState(!1),u=!n0.includes((M=a==null?void 0:a.type)!=null?M:""),c=async k=>{if(!t.ipfs)return f("Unable to connect to IPFS","error"),null;try{const w=await X0(k);return(await t.ipfs.add(w)).path}catch{return f("IPFS error","error"),null}},p=async(k,w)=>{if(!t.contract.full)return f("Unable to connect to contract","error"),null;try{const L=G();return await(await t.contract.full.uploadFile(L,k,w.type,w.name)).wait(),L}catch{return f("Transaction error","error"),null}},v=async()=>{if(!a){f("File not provided","error");return}if(u){f("Invalid file format","error");return}if(a.size>100*10**6){f("File is too large","error");return}s(!0);const k=await c(a);if(!k){s(!1);return}const w=await p(k,a);if(!w){s(!1);return}n(`/image/${o}/${w}`)};return e(B,{header:e(r0,{}),children:e("div",{className:"flex flex-col flex-grow justify-center items-center",children:d(N,{title:"Upload image",description:a?a.name:"Choose image from your device to upload to blockchain",truncate:!0,children:[e(ne,{disabled:l,accept:n0,file:a,onChange:i}),a&&e("div",{className:"mt-3",children:e(E,{disabled:l,block:!0,onClick:v,children:l?e(x,{color:"white",className:"w-6 h-6 animate-spin",children:e(C,{})}):"Upload"})})]})})})},ae=()=>{const f=y(C0),t=y(R),{available:o,login:n}=S(),[a,i]=r.exports.useState(!1),l=m0(),s=async()=>{o&&await n(),window.setTimeout(()=>i(!0),o?0:1e3)};return r.exports.useEffect(()=>{if(window.location.href.match(/[^\/]#/)){const u=window.location.href.replace("#","/#");window.history.replaceState({},document.title,u)}},[l]),r.exports.useEffect(()=>{(async()=>await s())()},[]),f?e(L0,{}):a?d(p0,{children:[e(K,{path:"/image/:owner/:uuid",element:e(fe,{})}),e(K,{path:"",element:t?e(oe,{}):e(re,{})})]}):e(E0,{})},se=h0({reducer:{app:I0}});g0.render(e(I.StrictMode,{children:e(x0,{store:se,children:e($.MetamaskStateProvider,{children:e(O0,{children:e(Z0,{limit:1,children:e(w0,{children:e(ae,{})})})})})})}),document.getElementById("root"));
